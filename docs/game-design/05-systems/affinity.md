# í˜¸ê°ë„ ì‹œìŠ¤í…œ

## ê°œìš”

ìºë¦­í„°ì™€ì˜ ê´€ê³„ë¥¼ ìˆ˜ì¹˜í™”. í˜¸ê°ë„ì— ë”°ë¼ ëŒ€í™”, ì´ë²¤íŠ¸, ì—”ë”©ì´ ë³€í™”.

---

## ê¸°ë³¸ ê·œì¹™

### í˜¸ê°ë„ ë²”ìœ„

| ë²”ìœ„ | ë‹¨ê³„ | ì„¤ëª… |
|------|------|------|
| -100 ~ -50 | ì ëŒ€ | ëŒ€í™” ê±°ë¶€, ë°©í•´ |
| -49 ~ -1 | ê²½ê³„ | ì°¨ê°€ìš´ ë°˜ì‘ |
| 0 ~ 19 | ì¤‘ë¦½ | ê¸°ë³¸ ìƒíƒœ |
| 20 ~ 39 | í˜¸ì˜ | ì¹œì ˆí•œ ë°˜ì‘ |
| 40 ~ 59 | ì¹œë°€ | ê°œì¸ì  ëŒ€í™” ê°€ëŠ¥ |
| 60 ~ 79 | ì‹ ë¢° | ë¹„ë°€ ê³µìœ  |
| 80 ~ 100 | ê¹Šì€ ìœ ëŒ€ | íŠ¹ë³„ ì´ë²¤íŠ¸ |

### ë£¨í”„ ê°„ ìœ ì§€

í˜¸ê°ë„ëŠ” **ì˜êµ¬ ë°ì´í„°**ë¡œ ë£¨í”„ ê°„ ìœ ì§€ë¨.

```yaml
persistence:
  type: "permanent"
  reset: false  # ë£¨í”„ ë¦¬ì…‹ë˜ì§€ ì•ŠìŒ

  narrative_explanation: |
    NPCëŠ” í”Œë ˆì´ì–´ë¥¼ ê¸°ì–µí•˜ì§€ ëª»í•˜ì§€ë§Œ,
    í”Œë ˆì´ì–´ì˜ "ì¸ìƒ"ì€ ë¬´ì˜ì‹ì ìœ¼ë¡œ ë‚¨ì•„ìˆìŒ.

  game_expression:
    high: "ì™ ì§€ ëª¨ë¥´ê²Œ ì´ ì‚¬ëŒí•œí…Œ í˜¸ê°ì´ ê°„ë‹¤."
    low: "ì™ ì§€ ëª¨ë¥´ê²Œ ì´ ì‚¬ëŒì´ ë¶ˆí¸í•˜ë‹¤."
```

---

## ìºë¦­í„°ë³„ ì´ˆê¸°ê°’

| ìºë¦­í„° | ì´ˆê¸° í˜¸ê°ë„ | íŠ¹ì„± |
|--------|-------------|------|
| ê¹€ë™í˜„ | 0 | ì˜¬ë¦¬ê¸° ì–´ë ¤ì›€ |
| ì´ìŠ¹í˜¸ | 15 | ê¸°ë³¸ í˜¸ì˜ì  |
| ìœ¤ì§€í˜„ | 10 | ì¹œí•´ì§€ê¸° ì‰¬ì›€ |
| ë°•ì¤€í˜ | 5 | ë§ˆìŒ ì—´ê¸° ì–´ë ¤ì›€ |
| ìµœë¯¼ìˆ˜ | 20 | ì—´ì •ì  ì¡´ê²½ |

---

## í˜¸ê°ë„ ë³€í™”

### ì¦ê°€ ìš”ì¸

| í–‰ë™ | ë³€í™”ëŸ‰ | ì˜ˆì‹œ |
|------|--------|------|
| ì¸ì‚¬/ëŒ€í™” | +1~3 | ì¼ìƒì  ëŒ€í™” |
| ë„ì›€ | +5~10 | ì—…ë¬´ ë„ì›€, ìœ„ë¡œ |
| ì„ ë¬¼ | +3~8 | ì»¤í”¼ ì‚¬ì£¼ê¸° |
| ë¹„ë°€ ê³µìœ  | +10~15 | ê³ ë¯¼ ë“¤ì–´ì£¼ê¸° |
| í•¨ê»˜ ì‹œê°„ | +3~5 | ì ì‹¬, ì»¤í”¼ |
| ì •í™•í•œ ì´í•´ | +5~10 | ê³µê°, ë§ëŠ” ë§ |

### ê°ì†Œ ìš”ì¸

| í–‰ë™ | ë³€í™”ëŸ‰ | ì˜ˆì‹œ |
|------|--------|------|
| ë¬´ì‹œ | -3~5 | ëŒ€í™” ê±°ì ˆ |
| ì‹¤ìˆ˜ | -5~10 | ì˜ëª»ëœ ì„ íƒ |
| ê±°ì§“ë§ | -10~20 | ë°œê° ì‹œ |
| ë°°ì‹  | -30~50 | ë¹„ë°€ ëˆ„ì„¤ ë“± |
| ì˜ëª»ëœ ì¦ê±° | -5~10 | í‹€ë¦° ì¦ê±° ì œì‹œ |

---

## ë‹¨ê³„ë³„ í•´ê¸ˆ

### ê¹€ë™í˜„ (ë¶€ì¥)

```yaml
kim_donghyun:
  0_20:
    reaction: "ì—…ë¬´ì  ëŒ€í™”ë§Œ"
    unlocks: []

  20_40:
    reaction: "ê°€ë” ì¸ê°„ì ì¸ ë©´"
    unlocks:
      - event: "boss_coffee_thanks"

  40_60:
    reaction: "ê³ ë¯¼ì„ ë‚´ë¹„ì¹¨"
    unlocks:
      - event: "boss_overtime_talk"
      - clue: "clue_boss_stress"

  60_80:
    reaction: "ì§„ì‹¬ì„ í„¸ì–´ë†“ìŒ"
    unlocks:
      - event: "boss_rooftop_truth"
      - clue: "clue_boss_role_hint"

  80_100:
    reaction: "í˜‘ë ¥ ê°€ëŠ¥"
    unlocks:
      - route: "boss_cooperation"
      - item: "clue_keycard_12f"
```

### ìœ¤ì§€í˜„ (ëŒ€ë¦¬)

```yaml
yoon_jihyun:
  0_20:
    reaction: "ë°ê³  ì¹œì ˆ"
    unlocks:
      - event: "jihyun_greeting"

  20_40:
    reaction: "ì¹œí•œ ë™ë£Œ"
    unlocks:
      - event: "jihyun_lunch_together"
      - event: "jihyun_coffee"

  40_60:
    reaction: "ë§ˆìŒì„ ì—´ê¸° ì‹œì‘"
    unlocks:
      - event: "jihyun_cafe_talk"
      - clue: "clue_jihyun_worry"

  60_80:
    reaction: "ì†”ì§í•œ ê°ì •"
    unlocks:
      - event: "jihyun_rooftop_sunset"
      - flag: "romance_route_available"

  80_100:
    reaction: "ì‚¬ë‘"
    unlocks:
      - event: "jihyun_confession"
      - ending: "LOVE"
```

### ë°•ì¤€í˜ (ì‚¬ì›)

```yaml
park_junhyuk:
  0_20:
    reaction: "ë¬´ì‹¬í•¨"
    unlocks: []

  20_40:
    reaction: "ì¡°ê¸ˆ ì—´ë¦¼"
    unlocks:
      - event: "junhyuk_game_talk"

  40_60:
    reaction: "ì˜ë¯¸ì‹¬ì¥í•œ ë§"
    unlocks:
      - event: "junhyuk_strange_words"
      - clue: "clue_junhyuk_hint"

  60_80:
    reaction: "ì§„ì‹¤ ê³µìœ "
    unlocks:
      - event: "junhyuk_night_talk"
      - clue: "clue_junhyuk_100_loops"

  80_100:
    reaction: "ë™ì§€/ì—°ì¸"
    unlocks:
      - route: "junhyuk_cooperation"
      - ending: "ESCAPE_TOGETHER"
```

---

## í˜¸ê°ë„ UI

### í‘œì‹œ ë°©ì‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ğŸ’› ê´€ê³„                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ê¹€ë™í˜„ (ë¶€ì¥)                        â”‚
â”‚  [â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] ì¤‘ë¦½                   â”‚
â”‚                                      â”‚
â”‚  ìœ¤ì§€í˜„ (ëŒ€ë¦¬)                        â”‚
â”‚  [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘] ì‹ ë¢°                   â”‚
â”‚                                      â”‚
â”‚  ë°•ì¤€í˜ (ì‚¬ì›)                        â”‚
â”‚  [â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] í˜¸ì˜                   â”‚
â”‚                                      â”‚
â”‚  ì´ìŠ¹í˜¸ (ê³¼ì¥)                        â”‚
â”‚  [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘] ì¹œë°€                   â”‚
â”‚                                      â”‚
â”‚  ìµœë¯¼ìˆ˜ (ì¸í„´)                        â”‚
â”‚  [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘] ì¹œë°€                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ìˆ¨ê¸°ëŠ” ì •ë³´

- ì •í™•í•œ ìˆ˜ì¹˜ (í”Œë ˆì´ì–´ì—ê²Œ ë³´ì´ì§€ ì•ŠìŒ)
- ë‹¤ìŒ ë‹¨ê³„ ì¡°ê±´
- í•´ê¸ˆ ì´ë²¤íŠ¸ ëª©ë¡

---

## ëŒ€í™” ë¶„ê¸°

### í˜¸ê°ë„ì— ë”°ë¥¸ ëŒ€ì‚¬ ë³€í™”

```yaml
dialogue_variation:
  character: "kim_donghyun"
  trigger: "ì•„ì¹¨ ì¸ì‚¬"

  variations:
    low:  # 0~30
      text: "..."
      attitude: "ë¬´ì‹œ"

    mid:  # 31~60
      text: "ì‘, ì•„ì¹¨."
      attitude: "ë¬´ë‚œ"

    high:  # 61~100
      text: "ì™”ì–´? ì˜¤ëŠ˜ë„ í™”ì´íŒ…."
      attitude: "ì¹œê·¼"
```

### ì„ íƒì§€ í•´ê¸ˆ

```yaml
choice_unlock:
  scene: "cafeteria_lunch"

  choices:
    - text: "íŒ€ê³¼ í•¨ê»˜ ë¨¹ëŠ”ë‹¤"
      condition: null  # í•­ìƒ

    - text: "ì§€í˜„ê³¼ ë‘˜ì´ ë¨¹ëŠ”ë‹¤"
      condition: "jihyun >= 30"

    - text: "ì¤€í˜ê³¼ ëŒ€í™”í•œë‹¤"
      condition: "junhyuk >= 40"
```

---

## íŠ¹ìˆ˜ ê´€ê³„

### ë¡œë§¨ìŠ¤ í”Œë˜ê·¸

```yaml
romance_flags:
  jihyun_romance:
    requirement: "jihyun >= 60"
    events:
      - "jihyun_rooftop_sunset"
      - "jihyun_confession"
    ending: "LOVE"

  junhyuk_romance:  # ì„ íƒì  ë¡œë§¨ìŠ¤
    requirement: "junhyuk >= 70"
    events:
      - "junhyuk_bond"
      - "junhyuk_confession"
    ending: "LOVE_JUNHYUK"
```

### ì ëŒ€ ê´€ê³„

```yaml
antagonist_flags:
  boss_enemy:
    trigger: "kim_donghyun <= -30"
    effects:
      - "ë¶€ì¥ì´ ì ê·¹ì ìœ¼ë¡œ ë°©í•´"
      - "12ì¸µ ì ‘ê·¼ ë” ì–´ë ¤ì›Œì§"
      - "í•´ê³  ì—”ë”© ìœ„í—˜ ì¦ê°€"
```

---

## ë°ì´í„° êµ¬ì¡°

```typescript
interface CharacterAffinity {
  characterId: string;
  level: number;  // -100 ~ 100
  unlockedEvents: string[];
  flags: Record<string, boolean>;
}

interface AffinitySystem {
  affinities: Map<string, CharacterAffinity>;

  // í˜¸ê°ë„ ì¡°ì‘
  modify(characterId: string, delta: number): void;
  get(characterId: string): number;
  getStage(characterId: string): AffinityStage;

  // í•´ê¸ˆ ì²´í¬
  checkEventUnlock(eventId: string): boolean;
  checkChoiceUnlock(choiceId: string): boolean;

  // ì˜êµ¬ ì €ì¥
  save(): CharacterAffinity[];
  load(data: CharacterAffinity[]): void;
}
```

---

## ë°¸ëŸ°ìŠ¤ ì›ì¹™

### í˜¸ê°ë„ íšë“ ì†ë„

- í•œ ë£¨í”„ì— ìµœëŒ€ +30 ì •ë„
- 80+ ë„ë‹¬ì— 3~5 ë£¨í”„ í•„ìš”
- ë„ˆë¬´ ì‰¬ìš°ë©´ ì˜ë¯¸ ì—†ìŒ
- ë„ˆë¬´ ì–´ë ¤ìš°ë©´ ë‹µë‹µí•¨

### ê°ì†Œ ë¦¬ìŠ¤í¬

- ì˜ëª»ëœ ì„ íƒì— í˜ë„í‹° ìˆì§€ë§Œ
- íšŒë³µ ë¶ˆê°€ëŠ¥í•  ì •ë„ëŠ” ì•„ë‹˜
- ê·¹ë‹¨ì  ë°°ì‹ ë§Œ í° ê°ì†Œ
